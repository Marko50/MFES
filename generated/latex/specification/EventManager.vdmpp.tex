\begin{vdmpp}[breaklines=true]
class EventManager
types
-- TODO Define types here
 public String = seq of char;
values
-- TODO Define values here
instance variables
-- TODO Define instance variables here
 private events : map String to Event := {|->};
operations
-- TODO Define operations here
(*@
\label{EventManager:12}
@*)
 public EventManager : map String to Event ==> EventManager
 EventManager(evs) == (
  events := evs;
  return self;
 )
 post events = evs;
 
(*@
\label{getEvents:19}
@*)
 public pure getEvents : () ==> map String to Event
 getEvents() == (
  return events;
 );
 
(*@
\label{getEvent:24}
@*)
 public pure getEvent : String ==> Event
 getEvent (e) == (
  return events(e);
 )
 pre e in set dom events;
 
(*@
\label{addEvent:30}
@*)
 public addEvent : Event ==> ()
 addEvent(event) == (
  events := events ++ {event.getName() |-> event}
 )
 pre event.getName() not in set dom events
 post events = events~ ++ {event.getName() |-> event};
 
(*@
\label{removeEvent:37}
@*)
 public removeEvent : String ==> ()
 removeEvent(e) == (
  events:= {e} <-: events; 
 )
 pre e in set dom events
 post events = {e} <-: events~; 
 
(*@
\label{eventExists:44}
@*)
 private pure eventExists : String ==> bool
 eventExists(e) == (return e in set dom events);
 
(*@
\label{getEventTickets:47}
@*)
 public pure getEventTickets : String ==> set of nat
 getEventTickets(e) == (return events(e).getTickets())
 pre eventExists(e);
 
(*@
\label{getEventTicketsUser:51}
@*)
 public getEventTicketsUser : String*String*TicketManager ==> set of nat
 getEventTicketsUser(e,u,tm) == (
  dcl tickets : set of nat := {};
  for all ticket in set (events(e).getTickets()) do 
  (
   if tm.getTickets()(ticket).getOwner() = u
    then tickets := tickets union {ticket};
  );
  return tickets;
 );
 
(*@
\label{getEventFillPercent:62}
@*)
 public getEventFillPercent : String ==> nat
 getEventFillPercent(e) == (return events(e).getFillPercent();)
 pre eventExists(e);
 
(*@
\label{addTicket:66}
@*)
 public addTicket : nat*String ==> ()
 addTicket(t,e) == (
  events(e).addTicket(t);
 )
 pre eventExists(e);
 
(*@
\label{getEarnings:72}
@*)
 public getEarnings : String ==> rat
 getEarnings(e) == (return events(e).getEarnings();)
 pre eventExists(e);
 

functions
-- TODO Define functiones here
traces
-- TODO Define Combinatorial Test Traces here
end EventManager
\end{vdmpp}
